#ifndef AC_FILTER_DIRECTSHOW_SIDE_DATA_HPP
#define AC_FILTER_DIRECTSHOW_SIDE_DATA_HPP

#include <cstddef>

#include <streams.h>
#include <guiddef.h>

DEFINE_GUID(IID_MediaSideDataHDR, 0x53820dbc, 0xa7b8, 0x49c4, 0xb1, 0x7b, 0xe5, 0x11, 0x59, 0x1a, 0x79, 0xc);
DEFINE_GUID(IID_MediaSideDataHDRContentLightLevel, 0xed6ae576, 0x7cbe, 0x41a6, 0x9d, 0xc3, 0x7, 0xc3, 0x5d, 0xc1, 0x3e, 0xf9);
DEFINE_GUID(IID_MediaSideDataHDR10Plus, 0x183ed511, 0x8910, 0x4262, 0x88, 0xf6, 0x49, 0x46, 0xbc, 0x79, 0x9c, 0x84);
DEFINE_GUID(IID_MediaSideDataDOVIRPU, 0xbae40e6c, 0x5b93, 0x4170, 0x90, 0xcc, 0x5d, 0x5f, 0x2, 0xa2, 0x96, 0x38);
DEFINE_GUID(IID_MediaSideDataDOVIMetadata, 0x277ee779, 0x13f4, 0x434e, 0xbd, 0xec, 0x3d, 0x6f, 0x8c, 0xe, 0x15, 0xd2);
DEFINE_GUID(IID_MediaSideDataDOVIMetadataV2, 0xf1949f1c, 0x7474, 0x4f0f, 0xb1, 0x10, 0xfb, 0x73, 0x4c, 0x8, 0x85, 0x1d);
DEFINE_GUID(IID_MediaSideData3DOffset, 0xf169b76c, 0x75a3, 0x49e6, 0xa2, 0x3a, 0x14, 0x98, 0x3e, 0xbf, 0x43, 0x70);
DEFINE_GUID(IID_MediaSideDataEIA608CC, 0x40fefd7f, 0x85dd, 0x4335, 0xa8, 0x4, 0x8a, 0x33, 0xb0, 0xbf, 0x7b, 0x81);
DEFINE_GUID(IID_MediaSideDataControlFlags, 0xb5411ce3, 0x3b21, 0x4fd6, 0x80, 0xa8, 0xce, 0x68, 0x29, 0x69, 0xf7, 0x95);

DEFINE_GUID(CLSID_IMediaSideData, 0xf940ae7f, 0x48eb, 0x4377, 0x80, 0x6c, 0x8f, 0xc4, 0x8c, 0xab, 0x22, 0x92);
class IMediaSideData : public IUnknown
{
public:
    STDMETHOD(SetSideData)(GUID guidType, const BYTE* data, std::size_t size) PURE;
    STDMETHOD(GetSideData)(GUID guidType, const BYTE** data, std::size_t* size) PURE;
};

class CSideDataInputPin : public CTransformInputPin
{
public:
    using CTransformInputPin::CTransformInputPin;

    STDMETHODIMP ReceiveConnection(IPin* connector, const AM_MEDIA_TYPE* amt) override;
    STDMETHODIMP GetAllocator(IMemAllocator** allocator) override;
};

#endif
